"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{79134:function(e,t,n){n.d(t,{H:function(){return g}});var r=n(57437),a=n(2265),l=n(79984),s=n(18157),i=n(26739),o=n(28670);let d=e=>{let{search:t,setSearch:n,label:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center border-b px-3",children:[(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)("input",{className:"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",value:t,onChange:e=>n(e.target.value)})]}),a&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground font-medium px-3 py-2 bg-slate-50",children:a})]})};var c=n(57654),u=n(49108),m=n(37805);let f=e=>{let{totalPages:t,currentPage:n,setPage:a}=e;return t>1&&(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-1 py-2 bg-slate-50",children:[(0,r.jsxs)("div",{className:"text-sm font-medium px-2",children:["Page ",n,"/",null!=t?t:1]}),(0,r.jsxs)(c.z,{variant:"outline",size:"sm",className:"py-0 h-8 gap-1 pl-2.5 font-normal select-none",disabled:1===n,onClick:()=>a(n-1),children:[(0,r.jsx)(u.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Previous"})]}),(0,r.jsxs)(c.z,{variant:"outline",size:"sm",className:"py-0 h-8 gap-1 pr-2.5 font-normal select-none",disabled:n===t,onClick:()=>a(n+1),children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(m.Z,{className:"h-4 w-4"})]})]})};var p=n(80037);let x=e=>{var t,n,o,c,u,m;let{field:p,label:x,content:h,includes:g,excludes:b,onSelect:y,fetchCondition:N}=e,[j,w]=(0,a.useState)(1),[C,k]=(0,a.useState)(""),[S,_]=(0,a.useState)(),R=(0,l.JT)(null!==(o=null===(t=p.relation)||void 0===t?void 0:t.schema)&&void 0!==o?o:null),Y=(0,s.EC)(p.relation);if((0,a.useEffect)(()=>{(!N||N())&&(async()=>{_(await (0,s.mb)(p,C,j,R,null==h?void 0:h.id))})()},[j,C,null==h?void 0:h.id]),!R)return null;let F=null!==(c=null==g?void 0:g.map(e=>e.id))&&void 0!==c?c:[],I=null!==(u=null==b?void 0:b.map(e=>e.id))&&void 0!==u?u:[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.mY,{className:"pb-2",children:[(0,r.jsx)(d,{search:C,setSearch:k,label:x}),(0,r.jsx)(i.e8,{children:(0,r.jsxs)(i.fu,{children:[!!(null==g?void 0:g.length)&&(0,r.jsxs)(r.Fragment,{children:[g.map(e=>I.includes(e.id)?null:(0,r.jsx)(v,{relationSchema:R,option:e,onSelectItem:y},e.id)),(0,r.jsx)(i.zz,{className:"my-2"})]}),null==S?void 0:null===(n=S.items)||void 0===n?void 0:n.map(e=>F.includes(e.id)||I.includes(e.id)||h&&!Y&&(null==g?void 0:g.length)?null:(0,r.jsx)(v,{relationSchema:R,option:e,onSelectItem:y},e.id))]})})]}),(0,r.jsx)(f,{totalPages:null!==(m=null==S?void 0:S.last_page)&&void 0!==m?m:1,currentPage:j,setPage:w})]})},v=e=>{var t;let{relationSchema:n,option:a,selected:l,onSelectItem:s}=e,i=null!==(t=e.checkedIcon)&&void 0!==t?t:(0,r.jsx)(p.Z,{className:"h-4 w-4"});return(0,r.jsxs)("button",{type:"button",className:"w-full relative cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 flex items-stretch",onMouseEnter:e=>{e.currentTarget.setAttribute("aria-selected","true"),e.currentTarget.setAttribute("data-selected","true")},onMouseLeave:e=>{e.currentTarget.removeAttribute("aria-selected"),e.currentTarget.removeAttribute("data-selected")},onClick:e=>{null==s||s(a)},children:[a[n.label_field],(0,r.jsx)("div",{className:"ml-auto",children:l?i:null})]})};var h=n(82012);let g=e=>{var t,n;let i;let{field:o,fieldProps:d,content:u}=e,m=(0,s.EC)(o.relation),[f,p]=(0,a.useState)(!1),[v,g]=(0,a.useState)(!m&&u&&d.value?[d.value]:[]),[b,y]=(0,a.useState)([]),[N,j]=(0,a.useState)(!1),w=(0,l.JT)(null!==(n=null===(t=o.relation)||void 0===t?void 0:t.schema)&&void 0!==n?n:null);return((0,a.useEffect)(()=>{p(!0),!m&&(null==u?void 0:u.id)||(g([]),y([]))},[m,null==u?void 0:u.id]),(0,a.useEffect)(()=>{f&&(0,s.l)(v,b,d.onChange,m,o.optional,null==u?void 0:u.id)},[v,b]),f&&w)?(i=m?"Update connected ".concat(w.namespace):v.length?v[0][w.label_field]:"Select",(0,r.jsxs)(h.J2,{open:N,onOpenChange:j,children:[(0,r.jsx)(h.xo,{asChild:!0,children:(0,r.jsx)(c.z,{variant:"outline",className:"justify-start",children:i})}),(0,r.jsx)(h.yk,{className:"p-0 w-[602px]",align:"start",children:(0,r.jsxs)("div",{className:"text-sm grid grid-cols-2 items-start",children:[(0,r.jsx)("div",{className:"min-w-[300px] mr-0",children:(0,r.jsx)(x,{label:"Selected (click to remove)",field:o,includes:v,excludes:b,onSelect:e=>{b.find(t=>t.id===e.id)||y(m?[...b,e]:[e]),g(v.filter(t=>t.id!==e.id))},content:u,fetchCondition:()=>!!u})}),(0,r.jsx)("div",{className:"min-w-[300px] border-l",children:(0,r.jsx)(x,{label:"Available (click to add)",field:o,excludes:v,onSelect:e=>{v.find(t=>t.id===e.id)||g(m?[...v,e]:[e]),y(b.filter(t=>t.id!==e.id))}})})]})})]})):null}},33277:function(e,t,n){n.d(t,{C:function(){return i}});var r=n(57437);n(2265);var a=n(57742),l=n(22169);let s=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:n,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)(s({variant:n}),t),...a})}},26739:function(e,t,n){n.d(t,{di:function(){return p},e8:function(){return c},fu:function(){return m},mY:function(){return o},rb:function(){return u},sZ:function(){return d},zz:function(){return f}});var r=n(57437),a=n(2265),l=n(62177),s=n(9160),i=n(22169);n(9208);let o=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.mY,{ref:t,className:(0,i.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...a})});o.displayName=s.mY.displayName;let d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,r.jsx)(l._Ve,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)(s.mY.Input,{ref:t,className:(0,i.cn)("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...a})]})});d.displayName=s.mY.Input.displayName;let c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.mY.List,{ref:t,className:(0,i.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...a})});c.displayName=s.mY.List.displayName;let u=a.forwardRef((e,t)=>(0,r.jsx)(s.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));u.displayName=s.mY.Empty.displayName;let m=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.mY.Group,{ref:t,className:(0,i.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...a})});m.displayName=s.mY.Group.displayName;let f=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.mY.Separator,{ref:t,className:(0,i.cn)("-mx-1 h-px bg-border",n),...a})});f.displayName=s.mY.Separator.displayName;let p=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.mY.Item,{ref:t,className:(0,i.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n),...a})});p.displayName=s.mY.Item.displayName},80244:function(e,t,n){n.d(t,{NI:function(){return v},Wi:function(){return u},l0:function(){return d},lX:function(){return x},pf:function(){return h},xJ:function(){return p},zG:function(){return g}});var r=n(57437),a=n(2265),l=n(59143),s=n(82670),i=n(22169),o=n(12647);let d=s.RV,c=a.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(s.Qr,{...t})})},m=()=>{let e=a.useContext(c),t=a.useContext(f),{getFieldState:n,formState:r}=(0,s.Gc)(),l=n(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},f=a.createContext({}),p=a.forwardRef((e,t)=>{let{className:n,...l}=e,s=a.useId();return(0,r.jsx)(f.Provider,{value:{id:s},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",n),...l})})});p.displayName="FormItem";let x=a.forwardRef((e,t)=>{let{className:n,...a}=e,{error:l,formItemId:s}=m();return(0,r.jsx)(o._,{ref:t,className:(0,i.cn)(l&&"text-destructive",n),htmlFor:s,...a})});x.displayName="FormLabel";let v=a.forwardRef((e,t)=>{let{...n}=e,{error:a,formItemId:s,formDescriptionId:i,formMessageId:o}=m();return(0,r.jsx)(l.g7,{ref:t,id:s,"aria-describedby":a?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!a,...n})});v.displayName="FormControl";let h=a.forwardRef((e,t)=>{let{className:n,...a}=e,{formDescriptionId:l}=m();return(0,r.jsx)("p",{ref:t,id:l,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",n),...a})});h.displayName="FormDescription";let g=a.forwardRef((e,t)=>{let{className:n,children:a,...l}=e,{error:s,formMessageId:o}=m(),d=s?String(null==s?void 0:s.message):a;return d?(0,r.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",n),...l,children:d}):null});g.displayName="FormMessage"},12647:function(e,t,n){n.d(t,{_:function(){return d}});var r=n(57437),a=n(2265),l=n(24602),s=n(57742),i=n(22169);let o=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(l.f,{ref:t,className:(0,i.cn)(o(),n),...a})});d.displayName=l.f.displayName},86468:function(e,t,n){n.d(t,{r:function(){return i}});var r=n(57437),a=n(2265),l=n(94845),s=n(22169);let i=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(l.fC,{className:(0,s.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...a,ref:t,children:(0,r.jsx)(l.bU,{className:(0,s.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});i.displayName=l.fC.displayName},3549:function(e,t,n){n.d(t,{g:function(){return s}});var r=n(57437),a=n(2265),l=n(22169);let s=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...a})});s.displayName="Textarea"},79984:function(e,t,n){n.d(t,{Hz:function(){return m},Il:function(){return s},JT:function(){return d},MG:function(){return i},Qk:function(){return o},Vo:function(){return c},_8:function(){return l},aF:function(){return u}});var r=n(2265),a=n(18157);let l={appConfig:{version:"",resources:[],menus:[],schemas:[]},setAppConfig:()=>null,reloadAppConfig:()=>Promise.resolve()},s=(0,r.createContext)(l),i=()=>(0,r.useContext)(s).appConfig,o=()=>(0,r.useContext)(s).appConfig.schemas,d=e=>(0,r.useContext)(s).appConfig.schemas.find(t=>t.name===e),c=(0,r.createContext)({user:void 0,setUser:()=>null}),u=()=>(0,r.useContext)(c).user,m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e?e.fields.filter(e=>"relation"===e.type&&e.relation||"file"===e.type).map(e=>{if(!e.relation)throw Error("Field ".concat(e.name," is relation type but has no relation field"));if((0,a.EC)(e.relation)&&"file"!==e.type)return null;let n=t.find(t=>{var n;return t.name===(null===(n=e.relation)||void 0===n?void 0:n.schema)});if(!n)throw Error("Schema ".concat(e.relation.schema," not found"));let r=["".concat(e.name,".id"),"".concat(e.name,".").concat(n.label_field)];return"file"===e.type&&r.push("".concat(e.name,".path"),"".concat(e.name,".type"),"".concat(e.name,".disk")),r.join(",")}).filter(Boolean):[]}}}]);