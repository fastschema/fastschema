(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{73802:function(e,t,l){Promise.resolve().then(l.bind(l,82189))},82189:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return x}});var n=l(57437),r=l(8792),i=l(34560),a=l(57654),o=l(15e3),s=l(75006),c=l(97081),u=l(76540),d=l(70769),v=l(47907),p=l(2265),f=l(79984),m=l(31548),g=l(60834),h=l(83187);function x(){var e,t,l,x,_,j;let w=(0,v.useSearchParams)(),y=null!==(e=w.get("schema"))&&void 0!==e?e:"",N=w.get("limit"),b=w.get("page"),S=w.get("sort"),k=w.get("filter"),I=(0,f.JT)(y),q=(0,c.rV)(y);(0,p.useEffect)(()=>{var e;return(0,i.D8)({title:(0,c.rV)(null!==(e=null==I?void 0:I.namespace)&&void 0!==e?e:""),description:"List all records of ".concat(q),breadcrumbs:[{name:q,path:"/content?schema="+y}],actions:[(0,n.jsx)(r.default,{href:"/content/edit?schema="+y,children:(0,n.jsxs)(a.z,{size:"sm",icon:(0,n.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),children:["New ",y]})},"create")]}),i.D8},[y]);let{data:z,isLoading:E,error:P,refetch:J}=(0,u.a)({queryKey:["schema",y],queryFn:()=>(0,m.Q7)(y,{limit:N?parseInt(N):void 0,page:b?parseInt(b):void 0,sort:null!=S?S:void 0,filter:k?JSON.parse(k):void 0}),retry:0});return(null==I?void 0:I.name)?E?(0,n.jsx)(s.g,{}):P?(0,n.jsx)(o.T,{error:P}):(0,n.jsx)(g.i,{ssr:!0,data:null!==(t=null==z?void 0:z.items)&&void 0!==t?t:[],pagination:{current_page:null!==(l=null==z?void 0:z.current_page)&&void 0!==l?l:1,last_page:null!==(x=null==z?void 0:z.last_page)&&void 0!==x?x:1,per_page:null!==(_=null==z?void 0:z.per_page)&&void 0!==_?_:10,total:null!==(j=null==z?void 0:z.total)&&void 0!==j?j:0},sort:S,columns:(0,h.qJ)(I,()=>{J()}),enableRowSelection:!0,getRowId:e=>{var t;return String(null!==(t=e.id)&&void 0!==t?t:"")},filterTitle:"Filter ".concat((0,c.rV)(I.name)),request:async e=>{let{pagination:t,sorting:l,columnFilters:n}=e,r={};if((null==t?void 0:t.pageIndex)&&(r.page=t.pageIndex+1),(null==t?void 0:t.pageSize)&&(r.limit=t.pageSize),(null==l?void 0:l.length)&&(r.sort=l.map(e=>{let{id:t,desc:l}=e;return"".concat(l?"-":"").concat(t)}).join(",")),null==n?void 0:n.length)for(let{id:e,value:t}of(r.filter={},n))r.filter[e]={$like:"%".concat(t,"%")};let i=(0,m.rP)(r),a="/content?schema=".concat(y,"&").concat(i);return window.history.replaceState({...window.history.state,as:a,url:a},"",a),(0,m.Q7)(y,r)}}):(0,n.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,n.jsx)("p",{className:"text-center text-2xl font-bold",children:"Please select a schema"})})}}},function(e){e.O(0,[310,572,902,637,872,792,571,32,732,152,998,147,203,807,365,313,156,704,547,117,271,650,834,971,69,744],function(){return e(e.s=73802)}),_N_E=e.O()}]);