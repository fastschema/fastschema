"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{79134:function(e,t,r){r.d(t,{H:function(){return g}});var n=r(57437),a=r(2265),l=r(79984),s=r(18157),i=r(26739),o=r(28670);let d=e=>{let{search:t,setSearch:r,label:a}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center border-b px-3",children:[(0,n.jsx)(o.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)("input",{className:"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",value:t,onChange:e=>r(e.target.value)})]}),a&&(0,n.jsx)("div",{className:"text-xs text-muted-foreground font-medium px-3 py-2 bg-slate-50",children:a})]})};var c=r(57654),u=r(49108),m=r(37805);let f=e=>{let{totalPages:t,currentPage:r,setPage:a}=e;return t>1&&(0,n.jsxs)("div",{className:"flex justify-center items-center space-x-1 py-2 bg-slate-50",children:[(0,n.jsxs)("div",{className:"text-sm font-medium px-2",children:["Page ",r,"/",null!=t?t:1]}),(0,n.jsxs)(c.z,{variant:"outline",size:"sm",className:"py-0 h-8 gap-1 pl-2.5 font-normal select-none",disabled:1===r,onClick:()=>a(r-1),children:[(0,n.jsx)(u.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Previous"})]}),(0,n.jsxs)(c.z,{variant:"outline",size:"sm",className:"py-0 h-8 gap-1 pr-2.5 font-normal select-none",disabled:r===t,onClick:()=>a(r+1),children:[(0,n.jsx)("span",{children:"Next"}),(0,n.jsx)(m.Z,{className:"h-4 w-4"})]})]})};var p=r(80037);let x=e=>{var t,r,o,c,u,m;let{field:p,label:x,content:v,includes:g,excludes:b,onSelect:j,fetchCondition:N}=e,[y,w]=(0,a.useState)(1),[C,k]=(0,a.useState)(""),[S,R]=(0,a.useState)(),I=(0,l.JT)(null!==(o=null===(t=p.relation)||void 0===t?void 0:t.schema)&&void 0!==o?o:null),F=(0,s.EC)(p.relation);if((0,a.useEffect)(()=>{(!N||N())&&(async()=>{R(await (0,s.mb)(p,C,y,I,null==v?void 0:v.id))})()},[y,C,null==v?void 0:v.id]),!I)return null;let _=null!==(c=null==g?void 0:g.map(e=>e.id))&&void 0!==c?c:[],Y=null!==(u=null==b?void 0:b.map(e=>e.id))&&void 0!==u?u:[];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.mY,{className:"pb-2",children:[(0,n.jsx)(d,{search:C,setSearch:k,label:x}),(0,n.jsx)(i.e8,{children:(0,n.jsxs)(i.fu,{children:[!!(null==g?void 0:g.length)&&(0,n.jsxs)(n.Fragment,{children:[g.map(e=>Y.includes(e.id)?null:(0,n.jsx)(h,{relationSchema:I,option:e,onSelectItem:j},e.id)),(0,n.jsx)(i.zz,{className:"my-2"})]}),null==S?void 0:null===(r=S.items)||void 0===r?void 0:r.map(e=>_.includes(e.id)||Y.includes(e.id)||v&&!F&&(null==g?void 0:g.length)?null:(0,n.jsx)(h,{relationSchema:I,option:e,onSelectItem:j},e.id))]})})]}),(0,n.jsx)(f,{totalPages:null!==(m=null==S?void 0:S.last_page)&&void 0!==m?m:1,currentPage:y,setPage:w})]})},h=e=>{var t;let{relationSchema:r,option:a,selected:l,onSelectItem:s}=e,i=null!==(t=e.checkedIcon)&&void 0!==t?t:(0,n.jsx)(p.Z,{className:"h-4 w-4"});return(0,n.jsxs)("button",{type:"button",className:"w-full relative cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 flex items-stretch",onMouseEnter:e=>{e.currentTarget.setAttribute("aria-selected","true"),e.currentTarget.setAttribute("data-selected","true")},onMouseLeave:e=>{e.currentTarget.removeAttribute("aria-selected"),e.currentTarget.removeAttribute("data-selected")},onClick:e=>{null==s||s(a)},children:[a[r.label_field],(0,n.jsx)("div",{className:"ml-auto",children:l?i:null})]})};var v=r(82012);let g=e=>{var t,r;let i;let{field:o,fieldProps:d,content:u}=e,m=(0,s.EC)(o.relation),[f,p]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!m&&u&&d.value?[d.value]:[]),[b,j]=(0,a.useState)([]),[N,y]=(0,a.useState)(!1),w=(0,l.JT)(null!==(r=null===(t=o.relation)||void 0===t?void 0:t.schema)&&void 0!==r?r:null);return((0,a.useEffect)(()=>{p(!0),!m&&(null==u?void 0:u.id)||(g([]),j([]))},[m,null==u?void 0:u.id]),(0,a.useEffect)(()=>{f&&(0,s.l)(h,b,d.onChange,m,o.optional,null==u?void 0:u.id)},[h,b]),f&&w)?(i=m?"Update connected ".concat(w.namespace):h.length?h[0][w.label_field]:"Select",(0,n.jsxs)(v.J2,{open:N,onOpenChange:y,children:[(0,n.jsx)(v.xo,{asChild:!0,children:(0,n.jsx)(c.z,{variant:"outline",className:"justify-start",children:i})}),(0,n.jsx)(v.yk,{className:"p-0 w-[602px]",align:"start",children:(0,n.jsxs)("div",{className:"text-sm grid grid-cols-2 items-start",children:[(0,n.jsx)("div",{className:"min-w-[300px] mr-0",children:(0,n.jsx)(x,{label:"Selected (click to remove)",field:o,includes:h,excludes:b,onSelect:e=>{b.find(t=>t.id===e.id)||j(m?[...b,e]:[e]),g(h.filter(t=>t.id!==e.id))},content:u,fetchCondition:()=>!!u})}),(0,n.jsx)("div",{className:"min-w-[300px] border-l",children:(0,n.jsx)(x,{label:"Available (click to add)",field:o,excludes:h,onSelect:e=>{h.find(t=>t.id===e.id)||g(m?[...h,e]:[e]),j(b.filter(t=>t.id!==e.id))}})})]})})]})):null}},34560:function(e,t,r){r.d(t,{Sc:function(){return j},D8:function(){return b}});var n=r(57437),a=r(8792),l=r(13571),s=r.n(l),i=r(51919),o=r(2265),d=r(62177),c=r(59143),u=r(22169);let m=o.forwardRef((e,t)=>{let{...r}=e;return(0,n.jsx)("nav",{ref:t,"aria-label":"breadcrumb",...r})});m.displayName="Breadcrumb";let f=o.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("ol",{ref:t,className:(0,u.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",r),...a})});f.displayName="BreadcrumbList";let p=o.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("li",{ref:t,className:(0,u.cn)("inline-flex items-center gap-1.5",r),...a})});p.displayName="BreadcrumbItem";let x=o.forwardRef((e,t)=>{let{asChild:r,className:a,...l}=e,s=r?c.g7:"a";return(0,n.jsx)(s,{ref:t,className:(0,u.cn)("transition-colors hover:text-foreground",a),...l})});x.displayName="BreadcrumbLink";let h=o.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("span",{ref:t,role:"link","aria-disabled":"true","aria-current":"page",className:(0,u.cn)("font-normal text-foreground",r),...a})});h.displayName="BreadcrumbPage";let v=e=>{let{children:t,className:r,...a}=e;return(0,n.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,u.cn)("[&>svg]:size-3.5",r),...a,children:null!=t?t:(0,n.jsx)(d.XCv,{})})};v.displayName="BreadcrumbSeparator";let g={title:"",description:"",breadcrumbs:[],actions:[]},b=e=>{i.ZP.dispatch("pageInfo",null!=e?e:[])},j=()=>{var e,t;let[r,l]=(0,o.useState)(g);(0,o.useEffect)(()=>{i.ZP.on("pageInfo",e=>{l(null!=e?e:g)})},[]);let d=(null==r?void 0:null===(e=r.breadcrumbs)||void 0===e?void 0:e.length)?[{name:"Dash",path:"/"},...null!==(t=r.breadcrumbs)&&void 0!==t?t:[]]:[],c=d.length;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("title",{children:r.title}),(0,n.jsx)(m,{children:(0,n.jsx)(f,{children:s()(d,e=>e.path).map((e,t)=>{let r=t===c-1;return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsx)(p,{children:r?(0,n.jsx)(h,{children:e.name}):(0,n.jsx)(x,{asChild:!0,children:(0,n.jsx)(a.default,{href:e.path,children:e.name})})}),!r&&(0,n.jsx)(v,{})]},e.path)})})}),(r.title||r.description)&&(0,n.jsxs)("div",{className:"flex items-center justify-between space-y-2 w-full",children:[(0,n.jsxs)("div",{children:[r.title&&(0,n.jsx)("h1",{className:"text-lg font-semibold md:text-2xl",children:r.title}),r.description&&(0,n.jsx)("p",{className:"text-muted-foreground",children:r.description})]}),(0,n.jsx)("div",{className:"ml-auto mr-4 flex gap-2",children:r.actions})]})]})}},33277:function(e,t,r){r.d(t,{C:function(){return i}});var n=r(57437);r(2265);var a=r(57742),l=r(22169);let s=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,l.cn)(s({variant:r}),t),...a})}},26739:function(e,t,r){r.d(t,{di:function(){return p},e8:function(){return c},fu:function(){return m},mY:function(){return o},rb:function(){return u},sZ:function(){return d},zz:function(){return f}});var n=r(57437),a=r(2265),l=r(62177),s=r(38594),i=r(22169);r(9208);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.mY,{ref:t,className:(0,i.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",r),...a})});o.displayName=s.mY.displayName;let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,n.jsx)(l._Ve,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)(s.mY.Input,{ref:t,className:(0,i.cn)("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",r),...a})]})});d.displayName=s.mY.Input.displayName;let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.mY.List,{ref:t,className:(0,i.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",r),...a})});c.displayName=s.mY.List.displayName;let u=a.forwardRef((e,t)=>(0,n.jsx)(s.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));u.displayName=s.mY.Empty.displayName;let m=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.mY.Group,{ref:t,className:(0,i.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...a})});m.displayName=s.mY.Group.displayName;let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.mY.Separator,{ref:t,className:(0,i.cn)("-mx-1 h-px bg-border",r),...a})});f.displayName=s.mY.Separator.displayName;let p=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(s.mY.Item,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled='true']:pointer-events-none data-[disabled='true']:opacity-50",r),...a})});p.displayName=s.mY.Item.displayName},80244:function(e,t,r){r.d(t,{NI:function(){return h},Wi:function(){return u},l0:function(){return d},lX:function(){return x},pf:function(){return v},xJ:function(){return p},zG:function(){return g}});var n=r(57437),a=r(2265),l=r(59143),s=r(82670),i=r(22169),o=r(12647);let d=s.RV,c=a.createContext({}),u=e=>{let{...t}=e;return(0,n.jsx)(c.Provider,{value:{name:t.name},children:(0,n.jsx)(s.Qr,{...t})})},m=()=>{let e=a.useContext(c),t=a.useContext(f),{getFieldState:r,formState:n}=(0,s.Gc)(),l=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},f=a.createContext({}),p=a.forwardRef((e,t)=>{let{className:r,...l}=e,s=a.useId();return(0,n.jsx)(f.Provider,{value:{id:s},children:(0,n.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",r),...l})})});p.displayName="FormItem";let x=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:l,formItemId:s}=m();return(0,n.jsx)(o._,{ref:t,className:(0,i.cn)(l&&"text-destructive",r),htmlFor:s,...a})});x.displayName="FormLabel";let h=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:s,formDescriptionId:i,formMessageId:o}=m();return(0,n.jsx)(l.g7,{ref:t,id:s,"aria-describedby":a?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!a,...r})});h.displayName="FormControl";let v=a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:l}=m();return(0,n.jsx)("p",{ref:t,id:l,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",r),...a})});v.displayName="FormDescription";let g=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e,{error:s,formMessageId:o}=m(),d=s?String(null==s?void 0:s.message):a;return d?(0,n.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",r),...l,children:d}):null});g.displayName="FormMessage"},12647:function(e,t,r){r.d(t,{_:function(){return d}});var n=r(57437),a=r(2265),l=r(24602),s=r(57742),i=r(22169);let o=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(l.f,{ref:t,className:(0,i.cn)(o(),r),...a})});d.displayName=l.f.displayName},86468:function(e,t,r){r.d(t,{r:function(){return i}});var n=r(57437),a=r(2265),l=r(94845),s=r(22169);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)(l.fC,{className:(0,s.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...a,ref:t,children:(0,n.jsx)(l.bU,{className:(0,s.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});i.displayName=l.fC.displayName},3549:function(e,t,r){r.d(t,{g:function(){return s}});var n=r(57437),a=r(2265),l=r(22169);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("textarea",{className:(0,l.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});s.displayName="Textarea"},79984:function(e,t,r){r.d(t,{Hz:function(){return m},Il:function(){return s},JT:function(){return d},MG:function(){return i},Qk:function(){return o},Vo:function(){return c},_8:function(){return l},aF:function(){return u}});var n=r(2265),a=r(18157);let l={appConfig:{menus:[],schemas:[]},setAppConfig:()=>null,reloadAppConfig:()=>Promise.resolve()},s=(0,n.createContext)(l),i=()=>(0,n.useContext)(s).appConfig,o=()=>(0,n.useContext)(s).appConfig.schemas,d=e=>(0,n.useContext)(s).appConfig.schemas.find(t=>t.name===e),c=(0,n.createContext)({user:void 0,setUser:()=>null}),u=()=>(0,n.useContext)(c).user,m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e?e.fields.filter(e=>"relation"===e.type&&e.relation||"file"===e.type).map(e=>{if(!e.relation)throw Error("Field ".concat(e.name," is relation type but has no relation field"));if((0,a.EC)(e.relation)&&"file"!==e.type)return null;let r=t.find(t=>{var r;return t.name===(null===(r=e.relation)||void 0===r?void 0:r.schema)});if(!r)throw Error("Schema ".concat(e.relation.schema," not found"));let n=["".concat(e.name,".id"),"".concat(e.name,".").concat(r.label_field)];return"file"===e.type&&n.push("".concat(e.name,".path"),"".concat(e.name,".type"),"".concat(e.name,".disk")),n.join(",")}).filter(Boolean):[]}}}]);